---
params:
  boj: 12666
  bojTitle: Mine Layer (Large)
---

## 문제 내용

$R$행 $C$열의 사각 격자의 각 칸에 지뢰가 각각 0개 또는 1개 숨겨져 있습니다. 각 칸에는 그 칸을 중심으로 한 $3 \times 3$ 영역 내의 지뢰의 개수가 쓰여 있습니다. 이때 가운데 가로줄에 있는 지뢰의 개수의 최댓값을 구하세요.

### 입력

첫 줄에 테스트 케이스의 개수 $N$이 주어집니다. ($1 \le N \le 50$)

각 테스트 케이스에 대해, $R$과 $C$가 주어지고, 그 다음에 $R$행 $C$열의 격자의 각 칸에 적힌 값이 주어집니다. ($3 \le R, C \le 50$, $R$은 홀수)

각각의 입력에 대해, 그에 대응되는 지뢰의 배치가 존재함이 보장됩니다.

### 출력

각 테스트 케이스에 대해 `Case #<테스트 케이스 번호>: <문제의 답>`의 형식으로 출력합니다.

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

$R$이 $3k+2$가 아니라면, 각각의 연속한 2줄 또는 3줄의 세로줄 영역에 대해 방정식을 풀어서 각각의 $1 \times 2$ 또는 $1 \times 3$의 영역의 지뢰의 개수를 구할 수 있습니다.
여기서 포인트는 $R$이 $3k+2$ 꼴이어도 중간 줄에 대해서는 동일하게 연속 2칸 또는 3칸의 지뢰의 개수를 구할 수 있다는 점입니다.
이는 $R \bmod 3$으로 케이스를 나눠서 더하고 빼는 패턴을 적용해서 구해도 되고, 가우스 소거를 해서 구해도 됩니다.

이제 중간 줄의 방정식을 풀거나 첫 칸으로 브루트포스를 하고 싶지만, 그럴 필요도 없습니다. 역시 $C \bmod 3$으로 케이스를 적절히 나눠서 적당히 3 간격으로 값을 모두 더하면,
중간 줄의 지뢰의 총 개수는 하나의 값으로 고정될 수밖에 없음을 알 수 있습니다. 그 값을 출력하면 됩니다.

{{< /details >}}
