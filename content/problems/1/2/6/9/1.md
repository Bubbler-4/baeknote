---
params:
  boj: 12691
  bojTitle: Millionaire (Small)
---

## 문제 내용

처음에 $X$달러를 가지고 다음과 같은 게임을 합니다.

* 게임은 총 $M$라운드로 진행되며, 각 라운드를 이길 확률은 $P$로 동일합니다.
* 각 라운드를 시작하기 전에 당신이 가진 금액이 $y$달러라면, 각 라운드에 $0$달러 이상 $y$달러 이하의 임의의 실수만큼의 금액을 베팅할 수 있습니다.
* 그 라운드에서 당신이 승리하면 이전에 가졌던 금액에 베팅한 만큼을 추가로 얻고, 패배하면 베팅한 만큼을 잃습니다.
* $M$라운드가 모두 종료되었을 때 당신이 100만 달러 이상을 갖고 있다면 그만큼의 금액을 상금으로 받을 수 있고, 아니라면 아무것도 받을 수 없습니다.

$M$라운드가 종료되었을 때 당신이 100만 달러 이상을 갖고 있을 확률이 최대가 되도록 게임을 할 때, 그 확률을 구하세요.

### 입력

첫 줄에는 테스트 케이스의 개수 $T$가 주어집니다. ($1 \le T \le 100$)

각 테스트 케이스에 대해, $M$, $P$, $X$의 값이 순서대로 한 줄에 주어집니다. ($1 \le M \le 5$, $0 \le P \le 1$, $1 \le X \le 10^6$)

$M$과 $X$는 정수이고, $P$는 소수점 이하 6자리까지 주어질 수 있습니다.

### 출력

각 테스트 케이스에 대해 `Case #{테스트 케이스 번호}: {문제의 정답}`의 형식으로 출력합니다. 출력한 답의 정답과의 절대 오차가 $10^{-6}$ 이하이면 정답으로 인정됩니다.

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

이 문제는 다음과 같은 관찰로 풀 수 있습니다.

* 현재 금액이 0 이상 $10^6$ 이하의 범위일 때, 이 범위를 각 $M$에 대해 동일한 최적 전략을 갖는 구간들로 나눌 수 있습니다.
* $M$에서 최적 전략이 바뀌는 지점은 $M-1$에서 두 개의 최적 전략 구간의 시작점의 중점들입니다.
* $M-1$에서 선택한 두 시작점이 $x$와 $y$이고 그때의 승률이 각각 $p_x$와 $p_y$일 때, $M$에서 $\frac{x+y}{2}$를 갖고 있을 때 $\frac{y-x}{2}$만큼을 베팅하여 승리하면 $y$, 패배하면 $x$로 가는 상황을 만들 수 있으며,
  이때의 승률은 $P \times p_y + (1-P) \times p_x$입니다. 이 지점에서 최적의 전략은 가능한 모든 이런 전략 중에서 최댓값에 해당하는 전략입니다.

각 단계에서 이러한 경계점의 개수는 $2^M + 1$개 (0과 100만 포함)이며, $M \le 5$이므로 비효율적으로 구현해도 통과합니다.

{{< /details >}}
