---
params:
  boj: 13088
  bojTitle: Cube Dividing
---

## 문제 내용

단위 정육면체 $ABC$개가 $x$축 방향으로 $A$, $y$축 방향으로 $B$, $z$축 방향으로 $C$ 크기의 직육면체 모양으로 쌓여 있습니다.

여기서 $N$개의 단위 정육면체를 제거한 결과의 연결 요소의 개수를 구하세요. 두 개의 정육면체가 서로 면을 공유하면 둘은 연결되어 있다고 합니다.

### 입력

첫 줄에는 $A$, $B$, $C$, $N$의 값이 주어집니다. ($1 \le A, B, C \le 10^6$, $0 \le N \le 20\;000$)

다음 $N$줄에는 제거된 단위 정육면체의 좌표 $(x, y, z)$가 한 줄에 하나씩 주어집니다. ($0 \le x < A$, $0 \le y < B$, $0 \le z < C$)

중복되는 좌표는 주어지지 않습니다.

### 출력

문제의 정답을 출력합니다.

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

직육면체의 크기가 굉장히 크기 때문에, 모든 큐브나 심지어 모든 표면상의 큐브를 표현하는 것은 불가능합니다. 따라서 적당히 필요한 큐브만을 가지고 연결성을 따져야 합니다.

이를 위해서는 다음의 방법을 사용할 수 있습니다.

* 먼저 제거된 큐브 주변에 고려할 큐브를 생성하고, 이들 큐브끼리 같은 연결 요소에 속한다면 서로 연결합니다.
* 그 다음, 각각의 큐브에 대해서 6방향으로 projection을 하여, 닿는 다른 큐브가 있다면 그 큐브와 연결하고, 다른 큐브에 닿지 않고 직육면체의 표면에 닿았다면 그 자리에 추가적으로 고려할 큐브를 생성합니다.
* 이를 반복하면 예를 들어 직육면체에서 서로 마주보는 두 구석을 끊었을 경우 두 개의 안쪽 표면을 연결할 수 있습니다.

연결 요소의 개수를 세기 위해서는 그래프 탐색이나 분리 집합을 사용할 수 있습니다.

{{< /details >}}
