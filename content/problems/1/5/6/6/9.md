---
params:
  boj: 15669
  bojTitle: 나무 위의 입자
---

## 문제 내용

정점이 $N$개인 트리가 주어집니다. 이 트리에 대해 다음의 쿼리를 처리하세요.

* `u v c`: 정점 $u$에서 정점 $v$를 잇는 간선을 $u$에서 $v$ 방향으로 통과하는 단순 경로 중에서 그 경로 상의 간선의 개수를 2로 나눈 나머지가 $c$인 경로의 개수를 출력한다.

### 입력

첫 줄에 트리의 정점의 개수 $N$과 쿼리의 개수 $Q$가 주어집니다. ($2 \le N \le 10^5$, $1 \le Q \le 10^5$)

다음 $N-1$줄에는 트리의 간선들이 주어집니다.

그다음 $Q$줄에는 쿼리가 주어집니다. 각 쿼리는 올바른 쿼리임이 보장됩니다.

### 출력

각 쿼리에 대한 답을 한 줄에 하나씩 출력합니다.

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

트리의 임의의 정점을 루트로 잡으면 $u$와 $v$ 중 하나는 부모 정점, 하나는 자식 정점이 됩니다. 쿼리에서 원하는 경우의 수는 해당 간선으로 나눠진 두 연결 요소 내에서 각각 $u$와 $v$로부터의 거리의 홀짝에 따른 정점의 개수를 곱하여 얻을 수 있습니다.
해당 간선을 어느 쪽으로 통과하는지는 상관 없습니다.

$u$ 쪽의 연결 요소는 $u$를 루트로 하는 서브트리입니다. 이 연결 요소 내에서 $u$에서 거리가 홀짝인 정점의 개수는 트리 DP로 구할 수 있습니다.

$v$ 쪽의 연결 요소는 $u$를 루트로 하는 서브트리를 제외한 모든 정점을 포함합니다. $v$로부터의 거리가 홀짝인 것은 $u$로부터의 거리가 짝홀인 것과 같고, 그러한 정점의 수는
루트로부터 홀짝 거리에 있는 정점의 개수, $u$ 서브트리에서 홀짝 거리에 있는 정점의 수, 그리고 루트와 $u$ 사이의 거리를 알면 구할 수 있습니다.
리루팅 DP로 구해도 됩니다.

{{< /details >}}
