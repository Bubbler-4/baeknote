---
params:
  boj: 18226
  bojTitle: 안 읽은 사람은 누구?
---

## 문제 내용

생략

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

각각의 메시지에 대해, 그 메시지부터 안 읽었을 수 있는 사람들 중에서 그 메시지부터 안 읽은 사람들을 고르는 방법의 수를 모두 곱해주면 답이 됩니다.

사람 $i$는 그 사람이 보낸 마지막 메시지 이후의 메시지에 대해서 안 읽었을 수 있습니다. 해당 시점에 "안 읽었을 수 있는 사람"의 수에 1을 추가해 줍니다.

메시지 $i$부터 안 읽은 사람의 수는 메시지 $i$를 안 읽은 사람의 수 $b_i$에서 메시지 $i-1$을 안 읽은 사람의 수를 제외한 만큼입니다. 이 값이 음수라면 0을 출력합니다.

사람들을 고르는 방법의 수는 이항 계수로 구할 수 있으며, 모든 이항 계수의 곱은 곱셈 역원을 전처리한 뒤 $\mathcal{O}(m)$에 구할 수 있습니다.

{{< /details >}}
