---
params:
  boj: 18600
  bojTitle: Valentine's Day
---

## 문제 내용

$n$개의 선물들 중에서 몇 개의 선물들을 적당히 골라 여자친구에게 선물하려고 합니다. $i$번쨰 선물을 여자친구에게 주었을 때 여자친구가 좋아할 확률은 $p_i$이며, 각 사건은 독립입니다.
여자친구가 정확히 한 번 좋아할 확률을 최대화하도록 선물을 골라주세요.

### 입력

첫 줄에는 테스트 케이스의 개수 $T$가 주어집니다. ($1 \le T \le 100$)

각 테스트 케이스에 대해, 첫 줄에는 선물의 개수 $n$이 주어지고, 그 다음 줄에는 $p_1, p_2, \cdots, p_n$의 값이 주어집니다. ($1 \le n \le 10\;000$, $0 \le p_i \le 1$) $p_i$는 소수점 이하 6자리까지 주어집니다.

모든 테스트 케이스에서 $n$의 합은 $500\;000$을 초과하지 않습니다.

### 출력

각 테스트 케이스에 대해 여자친구가 정확히 한 번 좋아할 확률의 최댓값을 출력합니다. 절대 오차가 $10^{-6}$ 이하이면 정답으로 인정됩니다.

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

선물의 집합 $S$를 골랐을 때 여자친구가 0번 좋아할 확률을 $f_0(S)$, 1번 좋아할 확률을 $f_1(S)$라고 합시다. 그러면 다음이 성립합니다.

* $f_0(S \cup \{i\}) = f_0(S) \times (1 - p_i)$
* $f_1(S \cup \{i\}) = f_1(S) \times (1 - p_i) + f_0(S) \times p_i = f_1(S) + (f_0(S) - f_1(S)) p_i$

따라서 $f_0(S) > f_1(S)$이면 $p_i$가 최대인 것을 넣는 것이 당장 이득이며, $f_0(S) < f_1(S)$이면 무엇을 추가해도 이득이 될 수 없습니다.

또한, $f_0(S) < f_1(S)$일 경우, 어떤 $i$를 추가해도 $f_0(S \cup \{i\}) < f_1(S \cup \{i\})$이 됨을 보일 수 있습니다.
$i$를 추가하였을 때 양변에 $(1 - p_i)$가 곱해진 다음 우변에만 0보다 큰 $f_0(S) \times p_i$가 더해지는 형태이기 때문입니다.

이로부터 $p_i$들을 큰 것부터 뽑아 $f_0(S) > f_1(S)$인 동안 계속 추가하는 것이 최적이라고 추측할 수 있으며, 증명은 다음과 같습니다. (jiminp님의 기여 메시지에서 가져왔습니다.)

* 집합 $X$가 최적이라고 가정합니다. 어떤 $p_i < p_j$에 대해 $X$에 $i$가 들어있지만 $j$가 들어있지 않다면, $i$를 $j$로 바꿈으로써 두 번째 식에 의해 이득을 볼 수 있으므로 모순입니다.
  따라서 집합 $X$는 가장 큰 $k$개를 뽑은 것 중에서만 정해집니다.
* $f_0(S) > f_1(S)$인 동안은 그 다음 큰 $p_i$를 골라서 추가함으로써 이득을 볼 수 있고, 그 이후에는 $p_i$를 몇 개를 추가하든 부등식을 다시 뒤집을 수 없습니다.

{{< /details >}}
