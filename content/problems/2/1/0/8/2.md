---
params:
  boj: 21082
  bojTitle: Assignment Problem
---

## 문제 내용

$m$개의 포지션에 총 $n$명의 지원자가 지원을 했습니다. $i$번째 포지션에 $j$번째 지원자를 뽑았을 때 얻을 수 있는 이득을 $A_{ij} \ge 0$라고 할 때, 모든 포지션에 서로 다른 지원자를 뽑아 얻을 수 있는 총 이득을 최대화하려고 합니다.

각각의 이득의 값은 주어지지 않지만, 대신 각 포지션 $i$에 대해 모든 지원자들의 $A_{ij}$의 크기 순서가 주어집니다. (맨 앞에 주어진 지원자에 대한 값이 가장 크며, 같은 값은 없습니다.)

이때, 각 지원자에 대해, 이러한 크기 순서들을 모두 충족하는 어떤 행렬 $A$를 만들어 유일한 최적해가 그 지원자를 포함할 수 있는지 판별하고, 그러한 지원자들을 모두 출력하세요.

### 입력

첫 줄에는 정수 $n$과 $m$이 주어집니다. ($1 \le m \le 11$, $m \le n \le 1000$)

다음 $m$줄에는 길이 $n$의 순열 $P_{i1}, P_{i2}, \cdots, P_{in}$이 하나씩 주어집니다. 이는 $i$번째 포지션에서 지원자 $P_{i1}$을 뽑았을 때 얻는 이득이 가장 크고, 그 다음 $P_{i2}$, $P_{i3}$, ... 순으로 감소한다는 뜻입니다.

### 출력

첫 줄에는 문제의 조건을 충족하는 지원자의 수를 출력합니다.

두 번째 줄에는 그러한 지원자들의 번호를 오름차순으로 출력합니다.

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

먼저, 적어도 하나의 포지션에는 그 포지션에서 최고의 지원자를 뽑아야 합니다. 이는 다음과 같이 귀류법으로 증명할 수 있습니다.

* 어떠한 최적해에서 모든 포지션에 2번째 이상의 지원자를 뽑았다고 가정합니다.
* 선택된 모든 지원자가 각각 다른 포지션에서 최고의 지원자라면, 각각의 지원자가 최고의 지원자인 포지션으로 모두 옮겨서 더 이득을 볼 수 있으므로 모순입니다.
* 어떤 포지션의 최고의 지원자가 아무 데서도 선택되지 않았다면, 그 포지션의 지원자를 최고의 지원자로 교체하여 더 이득을 볼 수 있으므로 모순입니다.

이제 주어진 포지션들 중에서 하나를 골라서 그 포지션의 최고의 지원자를 뽑았다고 가정하면, 남은 $m-1$개의 포지션에 남은 $n-1$명의 지원자들의 랭킹이 주어진 상황이 됩니다.
이는 원래 문제의 상황과 동일하므로, 하나의 포지션을 골라 남은 지원자 중 최고의 지원자를 뽑는 행동을 반복할 수 있습니다.

그러면 $m!$개의 가능한 순서로 모든 포지션에 최고의 지원자들을 선택해 보고, 그 과정에서 한 번이라도 선택된 모든 지원자들을 나열하면 됩니다.

시간 제한이 다소 빡빡하므로 행렬을 복사하지 않고 선택된 포지션과 지원자들의 목록을 넘기는 등의 상수 최적화가 필요할 수 있습니다.

{{< /details >}}
