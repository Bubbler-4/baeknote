---
params:
  boj: 21175
  bojTitle: Painted Corridors
---

## 문제 내용

$n$개의 섬과 두 섬을 잇는 $m$개의 다리가 있습니다. 이 다리들 중 몇 개를 빨강 (red, R), 파랑 (blue, B), 노랑 (yellow, Y), 보라 (purple, P), 주황 (orange, O), 또는 초록 (green, G)색으로 칠하려고 합니다.
이러한 색칠을 하기 위해 페인트를 뿌리는 로봇을 3대를 설치했습니다. 그 3대의 로봇은 각각 빨강, 파랑, 또는 노란색 페인트를 뿌리며, 페인트를 뿌리는 것을 멈출 수는 없습니다.
대신 움직이는 속도를 조절할 수 있고, 어떤 섬에 멈춰있게 하는 것도 가능합니다.

어떤 다리를 빨강, 파랑, 노랑 중 하나로 칠하려면 그 색의 페인트를 뿌리는 로봇이 그 다리를 적어도 한 번 지나가야 하고, 다른 로봇은 한 번도 지나가면 안됩니다.

어떤 다리를 보라(=파랑+빨강), 주황(=빨강+노랑), 초록(=노랑+파랑) 중 하나로 칠하려면, 두 색의 페인트가 잘 섞이게 하기 위해서 두 가지 색깔의 페인트를 뿌리는 두 로봇이 동일한 방향과 속도로 그 다리를 지나가야 합니다.
세 번째 색깔의 로봇은 지나갈 수 없습니다. 이러한 다리를 여러 번 지나가려면 매번 위의 조건을 충족해야 합니다.

나머지 다리는 어떤 색으로 칠해지든 상관 없습니다. 즉, 세 로봇을 원하는 대로 이동할 수 있습니다.

이때 모든 다리를 주어진 색으로 칠할 수 있는지를 판별하세요.

### 입력

첫 줄에 $n$, $m$, 그리고 빨강, 파랑, 노랑 로봇의 시작점의 번호가 순서대로 주어집니다. ($2 \le n \le 100$, $1 \le m \le \frac{n(n-1)}{2}$) 섬은 1번부터 $n$번까지 번호가 매겨져 있습니다.

다음 $m$줄에는 각 다리가 잇는 두 섬의 번호 $i$, $j$ ($i < j$)와 그 다리를 어떤 색으로 칠할지가 주어집니다. 색깔은 `R`, `B`, `Y`, `P`, `O`, `G`, `X` 중 하나로, 첫 6가지는 해당하는 색깔을, `X`는
색깔이 상관 없음을 나타냅니다. 두 개의 다리가 서로 같은 섬의 쌍을 잇는 경우는 주어지지 않습니다.

### 출력

모든 다리를 주어진 색으로 칠할 수 있으면 `1`, 아니면 `0`을 출력합니다.

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

세 로봇의 위치를 상태로 하여 그래프 탐색을 진행합니다. 각 다리 별로 건널 수 있는 조건을 확인하고, 건널 수 있으면 그 다리에 ok를 표시하고 이동 후의 상태를 추가로 탐색합니다.
두 색을 섞어야 하는 경우, 예를 들어 `P`의 경우 빨강 로봇과 파랑 로봇이 같은 섬에 있을 때만 넘어갈 수 있고 두 로봇을 동시에 이동시켜야 함에 유의합니다.

색깔이 정해진 모든 다리에 ok가 표시되었으면 답은 1, 아니면 0입니다.

{{< /details >}}
