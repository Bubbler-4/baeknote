---
params:
  boj: 22418
  bojTitle: ツインリバース
---

## 문제 내용

길이 $N$의 배열 $A$가 주어집니다. 이 배열에는 1부터 $N$까지의 각 정수가 한 번씩 등장합니다. 즉, 배열 $A$는 순열입니다.

다음의 동작을 0회 이상 $10\;000$번 이하로 수행하여 $A$를 정렬할 수 있다면, 그러한 방법을 아무거나 하나 찾아 출력하세요.

* 정수 $i$ ($1 \le i \le N$)를 선택합니다. 1번째부터 $i-1$번째까지의 부분 배열과 $i+1$번째부터 $N$번째까지의 부분 배열을 각각 뒤집습니다.

### 입력

첫 줄에는 $N$이 주어집니다. ($1 \le N \le 3000$)

다음 줄에는 $A$의 원소가 순서대로 주어집니다.

### 출력

$A$를 정렬할 수 있다면 다음과 같이 출력합니다.

* 첫 줄에는 동작의 횟수를 출력합니다.
* 다음 줄부터는 각각의 동작에서 선택한 $i$의 값을 한 줄에 하나씩 출력합니다.

$A$를 정렬할 수 없다면 `-1`을 대신 출력합니다.

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

$A$, $C$, $E$, $G$를 부분 배열, $b$, $d$, $f$를 한 개의 원소라고 하면, 다음의 과정을 거쳐 4번의 동작으로 $b$, $d$, $f$를 왼쪽이나 오른쪽으로 회전시킬 수 있습니다.
각 단계에서 선택된 인덱스는 파란색 배경으로 표시하였으며, 부분 배열이 뒤집어진 것은 $A'$와 같이 표현합니다.

$$
\begin{matrix}
A & \colorbox{aqua}{\(b\)} & C & d & E & f & G \\
A' & b & G' & f & E' & \colorbox{aqua}{\(d\)} & C' \\
E & \colorbox{aqua}{\(f\)} & G & b & A & d & C \\
E & f & C' & d & A' & \colorbox{aqua}{\(b\)} & G' \\
A & d & C & f & E & b & G
\end{matrix}
$$

순열 사이클 중에서 길이 3 이상인 것은 이 루틴을 한 번 적용하여 2개 이상의 수를 제자리로 옮길 수 있고, 길이 2인 것이 짝수 개라면 두 개씩 묶어서 위의 루틴을 두 번 적용하여 모두 제자리로 옮길 수 있습니다.
따라서, 순열 패리티가 짝수인 순열은 모두 $2N$번 이내의 동작으로 정렬할 수 있습니다. 동작 중에 $b$, $d$, $f$의 바뀐 인덱스를 관리하려고 하면 실수가 발생할 수 있으므로,
세 수의 값만 기록해 두고 매번 각 수의 인덱스를 검색하고 배열 뒤집기 동작을 시뮬레이션하는 것으로 실수의 가능성을 줄일 수 있습니다.

순열 패리티가 홀수라면, 동작의 순열 패리티가 홀수인 인덱스를 아무거나 선택해서 한 번 적용한 다음 위의 루틴을 적용해서 풀 수 있습니다. 그런 인덱스가 존재하지 않는다면 ($N = 4k+2$), 어떻게 해도 $A$의 순열의 패리티를 홀수에서 짝수로 바꿀 수 없으므로
답은 `-1`이 됩니다.

{{< /details >}}
