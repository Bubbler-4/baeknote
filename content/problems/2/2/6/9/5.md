---
params:
  boj: 22695
  bojTitle: Spirograph
---

## 문제 내용

큰 원 $A$ 안에 작은 원 $B$를 $A$와 내접하게 놓습니다. $B$에는 구멍이 하나 뚫려 있습니다. 이때 $B$의 구멍에 연필을 꽂고 $B$를 $A$의 테두리를 따라 굴렸을 때 연필이 그리는 그림을 hypotrochoid라고 합니다.

이 그림의 선의 길이를 구하세요.

### 입력

입력은 여러 개의 테스트 케이스로 이루어집니다. 각 테스트 케이스에 대해, 정수 $P$, $Q$, $R$의 값이 한 줄에 주어집니다. $P$는 원 $A$의 반지름, $Q$는 원 $B$의 반지름, $R$은 원 $B$의 중심에서 구멍까지의 거리입니다.
($0 \le R < Q < P \le 1000$)

입력의 맨 끝에는 `0 0 0`이 주어집니다.

### 출력

각 테스트 케이스에 대해, 선의 길이를 출력합니다. **절대 오차**가 $10^{-2}$ 이하이면 정답으로 인정됩니다.

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

먼저, $R = 0$이라면 그림은 $P-Q$인 원이 되므로, 이 원의 둘레를 출력하면 됩니다.

$R \neq 0$인 경우, 원 $A$의 중심을 원점으로 두고, 원 $B$의 중심, 두 원의 접점, 그리고 구멍이 모두 양의 방향의 $x$축 위에 있다고 가정합시다.
이 상태에서 원 $B$를 한 바퀴 굴려 최초의 접점이 다시 $A$와 접하는 위치로 오게 되면, $B$가 $A$와 닿았던 영역은 $A$의 둘레의 $\frac{Q}{P}$배이므로, 이 곡선을 닫으려면 이를 $\frac{P}{\gcd(P,Q)}$번 반복하면 됩니다.

원 $A$의 중심을 $A$, 원 $B$의 중심을 $B$, 구멍을 $X$라고 하고, 이제 $B$가 선분 $AB$를 기준으로 한 바퀴 도는 동안 그린 곡선의 길이를 구해 봅시다. 딱 봐도 적분식을 풀기는 어려워 보이므로 대신 구분구적법을 사용할 수 있습니다.
적당한 간격 $e$에 대해 원 $B$가 $0, e, 2e, \cdots, ne = 2\pi$만큼 굴렀을 때 $X$의 위치를 계산해서, 이웃한 두 점 간의 거리의 합을 구하면 됩니다.

원 $B$가 $\theta$만큼 회전했다는 것은 원둘레에서 접점이 $Q\theta$만큼 이동했다는 뜻이며, 이 접점은 원 $A$를 기준으로는 $\frac{Q}{P} \theta$만큼 회전한 위치에 있습니다.
$X$의 위치는 원 $B$를 기준으로는 반대 방향으로 회전하므로, 다음의 변환을 통해 임의의 각도 $\theta$에 대해 $X$의 좌표를 구할 수 있습니다.

* 원점에서 시작하여
* $R$만큼 $+x$ 방향으로 평행이동
* $-\theta$만큼 원점을 중심으로 회전
* $Q$만큼 $+x$ 방향으로 평행이동
* $\frac{Q}{P} \theta$만큼 원점을 중심으로 회전

실제 답의 상한은 200만 정도이므로 허용되는 상대 오차는 약 $10^{-8}$ 안쪽입니다. (최악의 입력은 `1000 499 498`이 있습니다.)
하지만 다행히도 그냥 등간격의 $\theta$값을 쓰면 곡률이 큰 부분은 점이 촘촘하게 찍히기 때문에, 1만 개의 점만 써도 오차 범위 내의 답을 낼 수 있습니다.

{{< /details >}}
