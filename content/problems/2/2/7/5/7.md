---
params:
  boj: 22757
  bojTitle: Hills
---

## 문제 내용

$N$개의 선분이 주어집니다. 세 개 이상의 선분이 한 점에서 만나거나, 한 선분의 끝점이 다른 선분 위에 있는 경우는 주어지지 않으며, 모든 선분들은 연결되어 있습니다. 이때 이 선분들로 나눠지는 영역들 중에서 온전한 삼각형인 것의 개수를 구하세요.

한 선분의 일부가 삼각형의 내부로 튀어나와 있는 경우에는 온전한 삼각형이 아닙니다.

### 입력

첫 줄에는 테스트 케이스의 개수 $T$가 주어집니다. 각 테스트 케이스 앞에는 빈 줄이 하나씩 있습니다.

각 테스트 케이스의 첫 줄에는 선분의 개수 $N$이 주어집니다. ($1 < N \le 500$)

다음 $N$줄에는 각각 한 선분의 두 끝점이 $x$, $y$좌표 순으로 주어집니다. ($-10\;000 < x, y < 10\;000$)

### 출력

각 테스트 케이스에 대해 문제의 정답을 한 줄에 출력합니다.

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

주어진 선분들 간의 교점을 모두 확인하여 각 선분을 교점과 교점 사이, 그리고 끝점과 교점 사이의 구간으로 나눕니다. 그리고 각 구간을 두 개의 방향으로 나눠서, 어떤 방향 구간에 인접한 면 위에서 다음 방향 구간이 어디인지를 CCW로 구할 수 있습니다.

이를 모두 구현하고 나면, 모든 방향 구간 사이클을 탐색하여 사이클의 길이가 3인 것의 개수를 출력하면 됩니다.

이때 정수 자료형 기반의 분수값을 사용하여 계산을 하게 되면 각 교점의 값의 스케일이 분자가 약 $10^{12}$, 분모가 약 $10^8$ 수준이므로 이러한 세 점을 가지고는 계산하기가 어렵습니다.
대신에 하나의 교점과 두 개의 선분의 끝점을 이용할 수 있는데, 이렇게 하고 128비트 정수형을 사용하면 CCW를 정확히 구할 수 있습니다.

{{< /details >}}
