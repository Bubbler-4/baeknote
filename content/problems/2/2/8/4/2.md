---
params:
  boj: 22842
  bojTitle: Mirror Illusion
---

## 문제 내용

가로 세로의 길이가 각각 8인 정사각형 모양의 방이 있습니다. 맨 왼쪽 아래 구석을 원점으로 좌표를 매깁니다.

이 방에는 $n$개의 거울이 설치되어 있습니다. 각 거울은 길이가 1이고, 두 격자점을 잇는 가로 또는 세로 선분 위에 설치되어 있습니다. 모든 거울은 양면입니다.

한 사람이 $(0.75, 0.25)$의 위치에서 $(1, 0.5)$의 방향을 바라보고 서 있을 때, 그 사람의 시선 끝에는 벽의 한 점이나 자기 자신이 보일 것입니다. 이때 그 보이는 점의 좌표를 출력하세요.

### 입력

입력은 여러 개의 테스트 케이스로 이루어져 있습니다. 입력의 마지막에는 `-1`이 주어집니다.

각 테스트 케이스의 첫 줄에는 거울의 개수 $n$이 주어집니다. ($0 \le n \le 144$)

다음 $n$줄에는 각각의 거울의 배치를 나타내는 글자 $d_k$와 한쪽 끝점의 좌표 $(x_k, y_k)$가 주어집니다. $d_k$가 `x`이면 거울은 $(x_k, y_k)$와 $(x_k+1, y_k)$를 양 끝점으로 하는 선분 위에 있습니다.
$d_k$가 `y`이면 거울은 $(x_k, y_k)$와 $(x_k, y_k + 1)$을 양 끝점으로 하는 선분 위에 있습니다.

### 출력

각 테스트 케이스에 대해, 사람의 시선 끝에 있는 점의 $x$좌표와 $y$좌표를 각각 100배 하여 순서대로 출력합니다.

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

이 사람의 시선은 항상 두 이웃한 격자점의 중점을 45도 각도로 지나갑니다. 따라서, 각각의 격자점 중점을 45도로 진입하는 네 방향에 대해, 그 직후에 어느 격자점 중점을 어느 방향에서 진입하게 되는지를
미리 기록해 둘 수 있습니다.

그 다음, 사람의 시선을 벽에 닿거나 사이클을 이룰 때까지 따라가는 것을 반복합니다. 벽에 닿지 않고 $144\times 4 + 1$번의 이동을 하면 비둘기집 원리에 의해 같은 이동을 반복함을 보일 수 있으므로,
사이클 판정을 조금 더 쉽게 할 수 있습니다.

{{< /details >}}
