---
params:
  boj: 23676
  bojTitle: Doesn't Contain Loops or Multiple Edges
---

## 문제 내용

그래프 색칠이란, 그래프의 각 정점에 1 이상 $k$ 이하의 정수("색깔") 중 하나를 할당하여 간선으로 직접적으로 연결된 두 정점에 할당된 정수가 서로 다르도록 하는 것입니다.
정점이 $n$개인 그래프에서 이러한 색칠은 길이 $n$의 배열로 나타낼 수 있습니다. 이 배열의 $i$번째 원소는 $i$번째 정점의 색깔을 나타냅니다.

그래프 색칠 $b$가 $a$에 대해서 모노토닉하다는 것은 다음 중 정확히 하나가 성립함을 의미합니다.

* 모든 $1 \le i \le n$에 대해서, $a_i \le b_i$
* 모든 $1 \le i \le n$에 대해서, $a_i \ge b_i$

$a = b$라면 위 두 문장이 모두 참이므로 $b$는 $a$에 대해서 모노토닉하지 않습니다.

그래프와 그 그래프 색칠 $a$가 주어집니다. $a$에 대해 모노토닉한 그래프 색칠 $b$가 존재하는지 판별하세요.

### 입력

첫 줄에는 그래프의 정점의 개수 $n$, 간선의 개수 $m$, 색깔의 개수 $k$가 주어집니다. ($1 \le n, m, k \le 3 \times 10^5$)

다음 줄에는 색칠 $a$에서 각 정점의 색깔 $a_i$가 주어집니다.

다음 $m$줄에는 그래프의 간선의 목록이 주어집니다. 이 그래프는 loop나 multiple edge를 포함하지 않으며, 색칠 $a$는 올바른 색칠임이 보장됩니다.

### 출력

$b$가 존재하면 1, 존재하지 않으면 0을 출력합니다.

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

주어진 그래프에서 정점 하나의 색깔만 바꿔서 올바른 색칠을 만들 수 있다면, 이 색칠은 반드시 $a$에 대해 모노토닉합니다. 이는 각 정점에 이웃한 정점들의 색깔들을 모두 모아서 서로 다른 색깔의 개수를 확인하는 것으로 판별할 수 있습니다.

그렇지 않다면 다음의 논리에 의해 $b$는 존재하지 않습니다.

* 모노토닉의 정의에 의해, 색깔이 $A$에서 $B$로 바뀐 정점 $x$가 존재합니다. 일반성을 잃지 않고 $A < B$라고 가정합니다.
* 그렇다면 $x$의 이웃 중에서 색깔이 $B$였던 정점 $y$가 반드시 존재하며, 이 정점의 색깔은 $B$보다 큰 어떤 값 $C$가 되어야 합니다.
* 다시 $y$의 이웃 중에서 색깔이 $C$였던 정점 $z$가 반드시 존재하며, 이 정점의 색깔은 $C$보다 큰 어떤 값 $D$가 되어야 합니다. ...
* 이 논리는 이미 한 번 거친 정점으로 순환할 수 없으며, 언젠가는 새로운 정점의 색깔이 $k$보다 커져야 하므로 이는 모순입니다.

{{< /details >}}
