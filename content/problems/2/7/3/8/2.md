---
params:
  boj: 27382
  bojTitle: 화살표 수집가
---

## 문제 내용

생략

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

먼저 점 $A$를 고정합니다. 그러면 각각의 가능한 $B$에 대해 가능한 $C$의 개수와 $D$의 개수를 각각 구한 뒤에, 둘을 곱한 것을 모두 더하면 문제의 답을 얻을 수 있습니다.

편의를 위해, $A$가 원점에 오도록 모든 점을 평행이동하고 생각합니다. 그러면 $B$는 4사분면에 오게 되며, $C$는 3사분면 + $y$축의 음의 방향 + 4사분면, $D$는 4사분면 + $x$축의 양의 방향 + 1사분면에 있습니다.
$C$와 $D$가 있을 수 있는 영역을 각각 $-Y$영역, $+X$영역이라고 합시다.

각각의 $B$에 대해 가능한 $C$의 개수를 모두 구하기 위해, $-Y$영역에 있는 모든 점을 반시계 방향으로 각도정렬하고 모든 거리의 제곱 값들을 좌표압축하여 합 세그를 만듭니다.
그러고 나면 각도 방향의 투 포인터를 사용하여 원하는 값을 구할 수 있습니다. 각도가 90도 이상인지 판별은 피타고라스 정리와 관련된 판별법을 사용하면 됩니다. 이를 $D$에 대해서도 반복한 뒤 답을 구해주면 됩니다.

{{< /details >}}
