---
params:
  boj: 31803
  bojTitle: 교실 배정
---

## 문제 내용

$N$개의 물건을 나누어 $\lfloor \frac{N}{2} \rfloor$개의 쌍을 만드는 방법의 수를 구하세요. ($2 \le N \le 30$) 정답은 $2^{60}$을 초과하지 않습니다.

## 문제 풀이

{{% details title="Part 1" closed="true" %}}

먼저 $N$이 짝수인 경우를 풀어 봅시다.

$N$이 짝수라면 모든 물건은 어떤 쌍에 포함됩니다. 1번 물건과 쌍을 이룰 수 있는 물건의 개수는 $N-1$개이고, 그 쌍을 제외하면 $N-2$개의 물건을 $\frac{N-2}{2}$개의 쌍으로 나누는 문제가 됩니다.

이 과정을 반복하면 정답은 $(N-1) \times (N-3) \times \cdots \times 1$이 됨을 알 수 있습니다.

{{% /details %}}

{{% details title="Part 2" closed="true" %}}

$N$이 홀수라면 어떨까요?

$N$이 홀수이면 1번 물건이 어떤 쌍에 포함될 수도 있고 아닐 수도 있습니다. 포함되는 경우에는 $N-1$개의 다른 물건과 쌍을 이룰 수 있고, $N-2$개의 물건을 $\frac{N-3}{2}$개의 쌍으로 나누는 문제로 줄어듭니다.
포함되지 않는 경우에는 $N-1$개의 물건을 $\frac{N-1}{2}$개의 쌍으로 나누는 문제가 됩니다. 이를 이용하여 DP로 답을 구할 수 있습니다.

그런데 실제로 답을 구해보면 홀수인 $N$의 답은 $N+1$의 답과 일치합니다. 왜 그럴까요? $N+1$번째 물건을 추가한 뒤에 짝이 없는 물건을 $N+1$번째 물건과 짝지어 주면 $N+1$개의 물건에서 $\frac{N+1}{2}$개의 쌍을 만드는 방법이 되고,
반대로 $N+1$개의 물건으로 쌍을 만든 다음 $N+1$번 물건을 포함하는 쌍을 지우는 것으로 반대 방향으로도 대응이 됩니다. 따라서 두 경우 사이에는 일대일 대응이 성립합니다.

{{% /details %}}
