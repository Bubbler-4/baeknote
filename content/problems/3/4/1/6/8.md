---
params:
  boj: 34168
  bojTitle: $\left(A+Bi\right)^{C+Di}$
---

## 문제 내용

생략

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

먼저 $A = B = 0$인 경우, $C$가 양의 정수이고 $D$가 0인 경우에만 값이 존재하며, 이 값은 0으로 항상 실수입니다. 따라서 이 경우의 답은 $M$입니다.

이제 $A + Bi \neq 0$이라고 가정하고 식을 전개한 뒤 실수를 모두 제거하면 다음을 얻습니다. 식을 단순화하기 위해 $(A, B)$의 극좌표를 $(r, \theta)$라고 합시다.

$$(\cos (D \ln r) + i \sin (D \ln r)) (\cos (C \theta) + i \sin (C \theta))$$

여기서 $D \ln r + C \theta$가 $\pi$의 정수배이면 전체 값은 실수입니다. 여기서 두 가지 추측이 필요합니다.

* $\ln r \neq 0$이면, $D = 0$이어야 가능합니다. $\ln r \neq 0$은 $r \neq 1$, 즉 $(A, B) \notin \{(0, 1), (1, 0)\}$과 동치입니다.
* 정수점으로부터 얻을 수 있는 $\theta$ 중에서 $\pi$의 유리수배인 것은 모두 $\frac{\pi}{4}$의 정수배입니다. 입력 범위에서 이는 $A = 0$, $B = 0$, 또는 $A = B$일 때만 성립합니다.

이 두 가지 추측을 받아들이면 이제 다음과 같이 경우를 나눠서 답을 구할 수 있습니다. $-M \le x \le M$인 $x$ 중에서 짝수인 것의 개수를 $E$, 4의 배수인 것의 개수를 $F$라고 합시다.

* $(A, B) = (1, 0)$이면 답은 $(2M+1)^2$입니다.
* $(A, B) = (0, 1)$이면 답은 $(2M+1)E$입니다.
* $B = 0$이면 답은 $2M+1$입니다.
* $A = 0$이면 답은 $E$입니다.
* $A = B$이면 답은 $F$입니다.
* 그 외의 경우 답은 $1$입니다.

{{< /details >}}
