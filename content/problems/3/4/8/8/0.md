---
params:
  boj: 34880
  bojTitle: 두 번째로 큰 수
---

## 문제 내용

생략

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

이 문제는 [Cartesian tree](https://en.wikipedia.org/wiki/Cartesian_tree)를 사용하여 풀 수 있습니다. 이 트리의 특징은 다음과 같습니다.

* 서로 다른 값으로 이루어진 길이 $N$의 배열에 대해, 카테시안 트리는 스택을 이용하여 $2N$번 미만의 대소 비교로 만들 수 있습니다.
* 구간의 최댓값에 해당하는 정점은 구간 내에서 깊이가 가장 얕은 정점입니다.

구간에서 두 번째로 큰 수를 알아내려면 다음과 같이 최약 1회의 추가 쿼리로 알아낼 수 있습니다.

* 먼저 구간에서 깊이가 가장 얕은 정점을 구합니다.
* 그 정점의 왼쪽과 오른쪽으로 나누어 두 구간에서 다시 깊이가 가장 얕은 정점을 구합니다. 이들이 구간에서 두 번째로 큰 수의 후보가 됩니다.
* 이제 두 지점을 쿼리하여 둘 중 큰 쪽을 고릅니다.

따라서 총 $3N$ 미만의 쿼리로 문제를 풀 수 있습니다.

{{< /details >}}
