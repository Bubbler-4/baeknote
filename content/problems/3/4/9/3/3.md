---
params:
  boj: 34933
  bojTitle: 사과 게임 (Hard)
---

## 문제 내용

생략

## 문제 풀이

{{< details title="스포일러" closed="true" >}}

일단 {{< baeknote 34932 >}}의 핵심 관찰을 가져옵니다. 그러면 사과의 개수가 홀수인 경우는 다음과 같이 해결할 수 있습니다.

* 루루가 선택할 시작점을 정하면, 루루와 테라의 점수가 고정되며, 이는 $\mathcal{O}(N)$에 구할 수 있습니다.
* 따라서, 모든 가능한 시작점에 대해 점수들을 구한 뒤 테라의 점수가 최소인 것을 출력하면 됩니다.

사과의 개수가 짝수라면, 루루가 선택한 시작점이 정해졌을 때 테라의 최선의 선택을 찾아야 합니다.
이는 다음의 과정을 거쳐 역시 $\mathcal{O}(N)$에 구할 수 있습니다.

* 루루가 0번째 사과를 선택했다고 가정하면, 테라는 0번 사과를 가져가고 1번부터 $N-1$번 사과가 남습니다.
* 테라는 $\frac{N}{2} - 1$번 사과와 $\frac{N}{2} + 1$번 사과를 바꿀 수 있고, 이를 바꿀지 말지를 정하면 $\frac{N}{2}$번 사과와 $\frac{N}{2}+1$번 사과 중 큰 것을 루루가 가져가게 됩니다.
* 이 쌍에서 루루가 가져가는 것은 테라의 다른 선택에 영향을 받지 않으므로, 각 선택에 대해 루루의 확정 점수와 아직 사용되지 않은 값을 저장할 수 있습니다.
* 다음으로 테라가 $\frac{N}{2} - 2$번 사과와 $\frac{N}{2} + 2$번 사과를 바꿀지 말지를 선택하면, $\frac{N}{2} - 1$번 사과와 $\frac{N}{2}+2$번 사과 중 큰 것이 루루의 확정 점수에 추가됩니다.
* 이를 반복하여 최종적으로 루루에게 줘야 하는 확정 점수 중 작은 것을 선택하면 됩니다.


{{< /details >}}
